(this["webpackJsonpfile-transfer"]=this["webpackJsonpfile-transfer"]||[]).push([[0],{15:function(e,t,a){},26:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var i=a(9),s=a.n(i),n=a(20),l=a.n(n),o=(a(26),a(15),a(11)),r=a(12),c=a(8),d=a(14),p=a(13),f=a(16),h={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/ShareEasy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREAPI,authDomain:"shareeasy-dd2ce.firebaseapp.com",databaseURL:"https://shareeasy-dd2ce.firebaseio.com",projectId:"shareeasy-dd2ce",storageBucket:"shareeasy-dd2ce.appspot.com",messagingSenderId:"999885360104",appId:"1:999885360104:web:2be601450588e71272325d",measurementId:"G-1H3P6BK9N7"};f.a.initializeApp(h),f.a.analytics();var u,j=f.a,b=a(21),y=a(3),m={fontSize:"52px",color:"red",margin:"14px"},O={image:"fas fa-file-image",video:"far fa-file-video",audio:"far fa-file-audio",pdf:"far fa-file-pdf",text:"far fa-file-alt",zip:"far fa-file-archive",upload:"fas fa-upload"},g=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).displayLink=i.displayLink.bind(Object(c.a)(i)),i.displayMediaIcon=i.displayMediaIcon.bind(Object(c.a)(i)),i.copiedText=i.copiedText.bind(Object(c.a)(i)),i.state={copyState:"#a5bef0"},i}return Object(r.a)(a,[{key:"copiedText",value:function(e){this.setState({copyState:"#c4f5d6",copyMargin:"4px"})}},{key:"displayMediaIcon",value:function(){if(0===this.props.fileName.length||0===this.props.fileType.length)return O.upload;for(var e=Object.keys(O),t=0;t<e.length;t++)if(this.props.fileType.includes(e[t]))return O[e[t]];return O.text}},{key:"displayLink",value:function(){if(0!==this.props.downloadLink.length)return Object(y.jsxs)("div",{className:"dLink",style:{backgroundColor:this.state.copyState},children:[this.props.downloadLink," ",Object(y.jsx)(b.CopyToClipboard,{text:this.props.downloadLink,children:Object(y.jsx)("div",{onClick:this.copiedText,style:{borderLeft:"solid 1px black",display:"inline-block",padding:"8px",paddingLeft:"12px",marginLeft:"12px",fontSize:"16px"},children:Object(y.jsx)("i",{className:"far fa-clone",style:{cursor:"pointer"},onClick:this.copiedText})})})]})}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"upItem",children:[Object(y.jsxs)("div",{className:"upItemText",children:[Object(y.jsx)("i",{className:this.displayMediaIcon().toString(),style:m}),Object(y.jsx)("h3",{className:"fileName",children:0===this.props.fileName.length?"Please upload a file...":this.props.fileName})]}),this.displayLink(),this.props.expireTime?Object(y.jsx)("h3",{className:"fileName",children:"Expires in "+this.props.expireTime+" hrs"}):Object(y.jsx)("div",{})]})}}]),a}(s.a.Component),k={"Content-Type":"application/json",apikey:Object({NODE_ENV:"production",PUBLIC_URL:"/ShareEasy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LINKAPI},x="SAVED_LINKS",S=j.storage().ref(),v=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).uploadClicked=i.uploadClicked.bind(Object(c.a)(i)),i.onFileSelected=i.onFileSelected.bind(Object(c.a)(i)),i.displayProgress=i.displayProgress.bind(Object(c.a)(i)),i.state={fileName:"",downloadLink:"",fileType:"",uploadRunning:!1,progress:0},i}return Object(r.a)(a,[{key:"displayProgress",value:function(){return this.state.uploadRunning?Object(y.jsx)("progress",{value:this.state.progress,max:"100",style:{width:"80%"}}):Object(y.jsx)("i",{style:{display:"none"}})}},{key:"uploadClicked",value:function(e){this.state.uploadRunning||(this.setState({fileName:"",downloadLink:"",fileType:"",uploadRunning:!1,progress:0}),this.refs.fileUpload.click())}},{key:"onFileSelected",value:function(e){var t=this;e.stopPropagation(),e.preventDefault();var a=e.target.files[0];if(a&&!this.state.uploadRunning){var i=a.name;i=i.replace(/\s/g,""),u=S.child(i).put(a,{timeCreated:Date.now()}),this.setState({fileName:i,fileType:a.type}),u.on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;t.setState({progress:a,uploadRunning:!0})}),(function(e){console.log(e)}),(function(){u.snapshot.ref.getDownloadURL().then((function(e){var s={destination:e};fetch("https://api.rebrandly.com/v1/links",{method:"POST",headers:k,body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({downloadLink:e.shortUrl,uploadRunning:!1,progress:100,fileName:i,fileType:a.type});var s=JSON.parse(localStorage.getItem(x));(s=s||[]).push({fileName:i,fileType:a.type,dLink:e.shortUrl,genDate:Date.now()}),localStorage.setItem(x,JSON.stringify(s))}))}))})),console.log(a),this.setState({fileName:i,uploadRunning:!0})}}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"section",children:[Object(y.jsx)("h3",{className:"sectionInfo",children:"Upload a file to generate a download link that can easily be shared. Files that are uploaded stay available to download for 12 hours."}),Object(y.jsx)("button",{onClick:this.uploadClicked,className:"uploadButton",style:{color:"white"},children:"Upload File"}),Object(y.jsx)("input",{type:"file",id:"file",ref:"fileUpload",style:{display:"none"},onChange:this.onFileSelected}),""!==this.state.fileName?Object(y.jsx)(g,{fileType:this.state.fileType,fileName:this.state.fileName,downloadLink:this.state.downloadLink}):Object(y.jsx)("i",{}),this.displayProgress()]})}}]),a}(s.a.Component),N=function(e){if(e){for(var t=[],a=0;a<e.length;a++){var i=e[a],s=Math.floor((Date.now()-i.genDate)/36e5);if(!(s>=12)){var n=12-s;0===n&&(n="<1"),t.push(Object(y.jsx)("li",{style:{display:"inline-block"},children:Object(y.jsx)(g,{fileType:i.fileType,fileName:i.fileName,expireTime:n,downloadLink:i.dLink})},"link_".concat(a)))}}return t}},L=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var i;Object(o.a)(this,a),i=t.call(this,e);var s=JSON.parse(localStorage.getItem("SAVED_LINKS"));return i.state={pastLinks:N(s||[])},i.updateList=i.updateList.bind(Object(c.a)(i)),i.deleteLinks=i.deleteLinks.bind(Object(c.a)(i)),setInterval(i.updateList,1e3),i}return Object(r.a)(a,[{key:"deleteLinks",value:function(){localStorage.setItem("SAVED_LINKS","[]"),localStorage.removeItem("SAVED_LINKS"),localStorage.clear(),this.setState({pastLinks:[]})}},{key:"updateList",value:function(){var e=JSON.parse(localStorage.getItem("SAVED_LINKS"));console.log(e),e=e||[],this.setState({pastLinks:N(e)})}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"section",children:[Object(y.jsx)("h3",{className:"sectionInfo",children:"Generated download links"}),this.state.pastLinks.length>0?Object(y.jsxs)("div",{className:"deleteItems",onClick:this.deleteLinks,children:["Delete Links"," ",Object(y.jsx)("div",{style:{display:"inline-block",padding:"8px",paddingLeft:"12px",marginLeft:"12px",fontSize:"16px"},children:Object(y.jsx)("i",{className:"fas fa-trash",style:{cursor:"pointer"},onClick:this.deleteLinks})})]}):Object(y.jsx)("div",{}),this.state.pastLinks.length>0?Object(y.jsx)("ul",{className:"pastUploads",children:this.state.pastLinks}):Object(y.jsx)("h3",{className:"fileName",children:"No Uploads..."})]})}}]),a}(s.a.Component),T=function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsxs)("div",{style:{textAlign:"center"},children:[Object(y.jsx)("h1",{className:"title",children:"Share Easy!"}),Object(y.jsx)("i",{className:"fas fa-share-alt-square",style:{color:"white",fontSize:"50px",display:"inline-block",margin:"0px"}})]}),Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)(v,{}),Object(y.jsx)(L,{})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(y.jsx)(T,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.ce160ef2.chunk.js.map